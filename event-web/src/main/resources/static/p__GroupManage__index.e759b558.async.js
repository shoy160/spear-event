"use strict";(self.webpackChunkauthing_event_front=self.webpackChunkauthing_event_front||[]).push([[416],{83956:function(V,y,e){e.d(y,{G:function(){return l}});var E=e(30417);function l(C){return(0,E.request)("/manage/app/list",{params:C})}},6415:function(V,y,e){e.d(y,{Y:function(){return l}});var E=e(30417);function l(C){return(0,E.request)("/manage/group/list",{params:C})}},66494:function(V,y,e){e.r(y),e.d(y,{default:function(){return xe}});var E=e(86516),l=e.n(E),C=e(48651),i=e.n(C),Z=e(36047),N=e(16488),M=e(790),I=e(79454),g=e(7243),P=e(8278),R=e(34422),x=e(73355),F=e(30417);function ue(c){return(0,F.request)("/manage/group/".concat(c),{method:"delete"})}var oe=e(49214);function se(c){return(0,F.request)("/manage/group",{params:c})}var q=e(75629),le=e(18766),ie=e(22786),T=e.n(ie),de=e(46299),Y=e.n(de),pe=e(38046),ce=e.n(pe),ve=e(60712),me=e(46955),w=e(55380),fe=e(99920),ge=e(77965),he=e(3758),ye=e(666),_=e(58841),Ce=e(36079),ee=e(82921);function Re(c){return(0,F.request)("/manage/group",{method:"post",data:c})}function Ee(c,f){return(0,F.request)("/manage/group/".concat(c),{method:"put",data:f})}var ne=e(83956),ae=e(24160);function Ie(c){return(0,F.request)("/manage/group/".concat(c),{method:"get"})}var Pe=e(6415),t=e(17210),Ze=["actionRef","onCancel","groupId"],re={type:"Group"},Te=function(f){var z=f.actionRef,D=f.onCancel,U=f.groupId,S=ce()(f,Ze),h=S.title==="\u65B0\u5EFA",O=(0,Z.useRef)(),X=function(){var d=Y()(T()().mark(function a(o){var p,v,r;return T()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(p=o.type,v=o.appCode,!(!p||!v)){u.next=3;break}return u.abrupt("return",[]);case 3:return u.next=5,(0,Pe.Y)({type:p,appCode:v});case 5:return r=u.sent,u.abrupt("return",(0,_.Z)(r==null?void 0:r.data,function(m){var B=m.id,s=m.name;return{label:"".concat(s," - ").concat(B),value:B}}));case 7:case"end":return u.stop()}},a)}));return function(o){return d.apply(this,arguments)}}(),A=(0,q.Z)("GroupTypeEnum"),$=A.GroupTypeEnum,b=(0,ye.Z)(function(){return(0,_.Z)($,function(d){var a=d.value,o=d.key;return{label:a,value:o}})},[$]),H=(0,I.Z)(ne.G),j=H.data,L=function(){var a;P.ZP.success("".concat(S.title,"\u6210\u529F\uFF01")),D(),(a=z.current)===null||a===void 0||a.reload()},W=(0,I.Z)(Re,{manual:!0,onSuccess:L}),J=W.run,Q=(0,I.Z)(Ee,{manual:!0,onSuccess:L}),k=Q.run,K=(0,g.Z)(Y()(T()().mark(function d(){var a,o,p,v,r,n,u,m;return T()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(p=(a=O.current)===null||a===void 0||(o=a.validateFieldsReturnFormatValue)===null||o===void 0?void 0:o.call(a),p){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,(0,ee.V)(p);case 5:if(v=s.sent,r=l()(v,2),n=r[0],u=r[1],!(n||!u)){s.next=11;break}return s.abrupt("return");case 11:m=(0,Ce.Z)(u),h?J(m):k(U,m);case 13:case"end":return s.stop()}},d)})));return(0,t.jsxs)(ve.Y,i()(i()({},S),{},{formRef:O,layout:"horizontal",labelCol:{span:5},request:Y()(T()().mark(function d(){var a,o,p,v;return T()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!h){n.next=2;break}return n.abrupt("return",re);case 2:return n.next=4,(0,ee.V)(Ie(U));case 4:if(a=n.sent,o=l()(a,2),p=o[0],v=o[1],!p){n.next=8;break}return n.abrupt("return",re);case 8:return n.abrupt("return",v.data);case 9:case"end":return n.stop()}},d)})),modalProps:{destroyOnClose:!0,onCancel:D},width:600,onFinish:K,children:[(0,t.jsx)(me.Z.Group,{radioType:"button",fieldProps:{buttonStyle:"solid",onChange:function(){var a;(a=O.current)===null||a===void 0||a.setFieldValue("parentId",void 0)}},name:"type",label:"\u7C7B\u578B",readonly:!h,options:b,rules:[{required:h}]}),(0,t.jsx)(w.Z,{readonly:!h,name:"appCode",label:"\u4E8B\u4EF6\u5E94\u7528",options:(0,ae.U)(j==null?void 0:j.data),showSearch:!0,rules:[{required:h}]}),(0,t.jsx)(w.Z,{name:"parentId",label:"Parent ID",readonly:!h,dependencies:["type","appCode"],request:X}),(0,t.jsx)(fe.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0}]}),(0,t.jsx)(ge.Z,{name:"sort",label:"Sort"}),(0,t.jsx)(he.Z,{name:"logo",label:"Logo"})]}))},De=(0,Z.memo)(Te),Oe=e(12271),te=e(152),je=(0,oe.G)(se),Ge=i()(i()({},x.mo),{},{collapsed:!1,collapseRender:!1}),Me=function(){var f=(0,Z.useRef)(null),z=(0,I.Z)(ne.G),D=z.data,U=(0,q.Z)("GroupTypeEnum"),S=U.GroupTypeEnum,h=(0,M.x)({open:!1,title:"",groupId:0}),O=l()(h,2),X=O[0],A=O[1],$=(0,M.x)({open:!1,text:""}),b=l()($,2),H=b[0],j=b[1],L=(0,M.x)(0),W=l()(L,2),J=W[0],Q=W[1],k=(0,g.Z)(function(){A(function(r){r.open=!1})}),K=(0,g.Z)(function(){j(function(r){r.open=!1})}),d=(0,I.Z)(ue,{manual:!0,onSuccess:function(){var n;P.ZP.success("\u5220\u9664\u6210\u529F\uFF01"),K(),(n=f.current)===null||n===void 0||n.reload()}}),a=d.run,o=function(){a(J)},p=[{title:"\u5E94\u7528",dataIndex:"appName",copyable:!0,ellipsis:!0,valueType:"select",search:{transform:function(n){return{appCode:n}}},fieldProps:{options:(0,ae.U)(D==null?void 0:D.data),showSearch:!0}},{title:"\u5206\u7EC4\\\u6807\u7B7E\u540D\u79F0",dataIndex:"name",ellipsis:!0},{title:"Logo",dataIndex:"logo",copyable:!1,ellipsis:!0,valueType:"image",search:!1,renderText:function(n){return n!=null?n:te},fieldProps:{fallback:te}},{title:"\u7C7B\u578B",dataIndex:"type",valueEnum:(0,le.g)(S),valueType:"select"},{title:"Parent ID",dataIndex:"parentId",ellipsis:!0},{title:"Sort",dataIndex:"sort",ellipsis:!0,search:!1,sorter:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(n,u){var m=u.id,B=u.name;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.ZP,{className:"p-1",type:"link",onClick:function(){A(function(G){G.open=!0,G.title="\u7F16\u8F91",G.groupId=m})},children:"\u7F16\u8F91"},"edit"),(0,t.jsx)(R.ZP,{className:"p-1",type:"link",danger:!0,onClick:function(){j(function(G){G.text=B,G.open=!0}),Q(m)},children:"\u5220\u9664"})]})}}],v=(0,g.Z)(function(){return[(0,t.jsx)(R.ZP,{type:"primary",onClick:function(){A(function(n){n.open=!0,n.title="\u65B0\u5EFA"})},children:"\u65B0\u5EFA"},"add")]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{columns:p,actionRef:f,request:function(n,u){var m=u.sort;return je(i()(i()({},n),{},{sortWay:m}))},rowKey:"id",search:Ge,pagination:x.Xg,headerTitle:"\u5206\u7EC4\u6807\u7B7E\u5217\u8868",toolBarRender:v}),(0,t.jsx)(De,i()(i()({},X),{},{actionRef:f,onCancel:k})),(0,t.jsx)(Oe.Z,i()(i()({},H),{},{onCancel:K,delOnOk:o,title:"\u5220\u9664\u5206\u7EC4\\\u6807\u7B7E",placeholder:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0"}))]})},xe=(0,Z.memo)(Me)},24160:function(V,y,e){e.d(y,{U:function(){return M}});var E=e(48651),l=e.n(E),C=e(58841),i=e(52346),Z=function(g){return(0,C.Z)(g,function(P){var R=P.name,x=P.code;return{label:"".concat(R," - ").concat(x),value:x}})},N=[{label:"\u7CFB\u7EDF\u5E94\u7528",value:"System"},{label:"\u81EA\u5B9A\u4E49\u5E94\u7528",value:"Custom"}],M=function(g){if(!g)return[];var P=(0,i.Z)(g,"type");return(0,C.Z)(N,function(R){return l()(l()({},R),{},{options:Z(P[R.value])})})}}}]);
